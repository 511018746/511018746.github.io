<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" type="text/css" href="css/index.css">
    <link rel="stylesheet" type="text/css" href="css/reset.css">
</head>
<body>
<section id="warp">
    <!--流体布局-->
    <div class="mask">
        <div class="mian1"></div>
        <div class="mian2"></div>
        <span></span>
    </div>
    <header id="hearder">
        <!--固定布局-->
        <div class="hear-main ">
            <div class="logo">
                <h1>
                   <a href="#">
                       <img src="img/logo.png">
                   </a>
                </h1>
            </div>
            <div class="mouse">
                <audio src="img/audio.mp3" loop ></audio>
            </div>
            <nav class="nav">
                <ul class="clearfix">
                    <li>
                       <a href="#">
                           <div class="up"><img src="img/home_gruen.png"></div>
                           <div class="down"><img src="img/home.png"></div>
                       </a>
                    </li>
                    <li>
                        <a href="#">
                            <div class="up">Course</div>
                            <div class="down">Course</div>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <div class="up">Works</div>
                            <div class="down">Works</div>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <div class="up">About</div>
                            <div class="down">About</div>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <div class="up">Team</div>
                            <div class="down">Team</div>
                        </a>
                    </li>
                </ul>
            </nav>
            <div class="arrow"></div>
        </div>
    </header>
    <section id="content">
        <ul class="list">
            <li class="home">
                <section>
                <ul class="home1">
                    <li class="commonTitle active  ">
                        <div class="item">one layer</div>
                    </li>
                    <li class="commonTitle ">
                        <div class="item">two layer</div>
                    </li>
                    <li class="commonTitle">
                        <div class="item">three layer</div>
                    </li>
                    <li class="commonTitle">
                        <div class="item">four layer</div>
                    </li>
                </ul>
                <ul class="home2">
                    <li class="active"></li>
                    <li></li>
                    <li></li>
                    <li></li>
                </ul>
                </section>
            </li>
            <li class="course">
                <section>
                    <header class="course1 commonTitle">
                        <span>EINIGE</span>  <br />
                        <span>UNSERER</span> <br />
                        <span>KUNDEN</span>  <br />
                    </header>
                    <div class="course2 commonText">
                        <p>
                            Das Kundenvertrauen in unsere Kompetenz ist die notwendige Basis einer erfolgreichen Zusammenarbeit, gleichzeitig aber auch das größte Lob, das man uns entgegenbringen kann.
                            <br />
                            Diese und viele weitere große und kleine Kunden vertrauen uns seit Jahren, was uns stolz macht, und dafür sagen wir an dieser Stelle einfach mal.
                        </p>
                    </div>
                    <div class="course3">
                        <span class="line"></span>
                        <span class="line"></span>
                        <span class="line"></span>
                        <span class="line"></span>
                        <span class="line"></span>
                        <div class="item">
                           
                            <div class="face"></div>
                            <div class="backFace"></div>
                        </div>
                        <div class="item">
                            
                            <div class="backFace" ></div>
                            <div class="face" ></div>
                        </div>
                        <div class="item">
                            <div class="face"></div>
                            <div class="backFace"></div>
                        </div>
                        <div class="item">
                            <div class="backFace"></div>
                            <div class="face"></div>
                        </div>
                        <div class="item">
                            <div class="backFace"></div>
                            <div class="face"></div>
                        </div>
                        <div class="item">
                            <div class="backFace"></div>
                            <div class="face"></div>
                        </div>
                        <div class="item">
                            <div class="backFace"></div>
                            <div class="face"></div>
                        </div>
                        <div class="item">
                            <div class="backFace"></div>
                            <div class="face"></div>
                        </div>
                        <div class="item">
                            <div class="backFace"></div>
                            <div class="face"></div>
                        </div>
                        <div class="item">
                            <div class="backFace"></div>
                            <div class="face"></div>
                        </div>
                        <div class="item">
                            <div class="backFace"></div>
                            <div class="face"></div>
                        </div>
                        <div class="item">
                            <div class="backFace"></div>
                            <div class="face"></div>
                        </div>
                    </div>
                    <div class="plane1"></div>
                    <div class="plane2"></div>
                    <div class="plane3"></div>
                </section>
            </li>
            <li class="works">
                <section>
                    <div class="works1 commonTitle">
                        <span>EINBLICK</span> 	<br />
                        <span>ERKENNTNIS</span> <br />
                        <span>ERGEBNIS</span>	<br />
                    </div>
                    <div class="works2">
                            <div class="item">
                                <img src="img/worksimg1.jpg">
                                <div class="mask">
                                    <span></span>
                                    <div class="icon"></div>
                                </div>
                            </div>
                        <div class="item">
                            <img src="img/worksimg2.jpg">
                            <div class="mask">
                                <span></span>
                                <div class="icon"></div>
                            </div>
                        </div>
                        <div class="item">
                            <img src="img/worksimg3.jpg">
                            <div class="mask">
                                <span>xxxxxxxxxx</span>
                                <div class="icon"></div>
                            </div>
                        </div>
                        <div class="item">
                            <img src="img/worksimg4.jpg">
                            <div class="mask">
                                <span>xxxxxxx</span>
                                <div class="icon"></div>
                            </div>
                        </div>
                    </div>
                    <div class="works3"></div>
                    <div class="pencel1"></div>
                    <div class="pencel2"></div>
                    <div class="pencel3"></div>
                </section>
            </li>
            <li class="about">
                <section>
                    <header class="about1 commonTitle">
                        <span>DIE</span> <br />
                        <span>SPEZIELLE</span> <br />
                        <span>VIELFALT</span> <br />
                    </header>
                    <div class="about2">
                        <p class="commonText">Der bunte Medienmix ist die Faszination die uns antreibt und das, was man an uns schätzt. Von A bis Z und von vorne bis hinten nehmen wir Ihr Projekt unter unsere Fittiche und lassen es zu etwas Großartigem heranwachsen.</p>
                    </div>
                    <div class="about3">
                        <div class="item">
                            <span></span>
                            <ul data-src="img/about1.jpg"></ul>
                           </div>
                        <div class="item">
                            <span></span>
                            <ul data-src="img/about3.jpg"></ul>
                        </div>
                    </div>
                    <div class="about4"></div>
                </section>
            </li>
            <li class="team">
                <section>
                    <header class="team1 commonTitle">
                        <span>WIR SIND</span> <br />
                        <span>VOXELAIR</span> <br />
                    </header>
                    <div class="team2">
                        <p class="commonText">Wir sind seit 2002 eine Full-Service-Werbeagentur mit Stammsitz in Heimsheim, zwischen Stuttgart und Karlsruhe. </p>
                        <p class="commonText">Über 60 Jahre Erfahrung vereinen das gesamte VoxelAir-Team. Dabei hat jedes Voxel neben professionellem Allroundwissen auch sein ganz spezielles Gebiet, um selbst die individuellsten Kundenwünsche schnell und kompetent umzusetzen.</p>
                    </div>
                    <div class="team3">
                        <ul>
                            <li></li>
                            <li></li>
                            <li></li>
                            <li></li>
                            <li></li>
                            <li></li>
                            <li></li>
                            <li></li>
                        </ul>
                    </div>
                </section>
            </li>
        </ul>
        <ul class="dot">
            <li class="active"></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
        </ul>
    </section>
</section>
</body>
<script>
  window.onload=function (ev) {
      var arrow=document.querySelector(".hear-main > .arrow")
      var liNode=document.querySelectorAll(".nav > ul > li")
      var upNode=document.querySelectorAll(".nav > ul > li .up")
      var firstliNode=liNode[0]
      var fitsrUpNode=firstliNode.querySelector(".up")


    var head=document.querySelector("#hearder")
    var  content=document.querySelector("#content")
    var contLiNode=document.querySelectorAll("#content  >.list > li")
    var list=document.querySelector("#content ul")


      var home2Li=document.querySelectorAll("#content  .home  .home2 > li")
      var home1Li=document.querySelectorAll("#content > .list > .home  .home1 > li")
      var home1=document.querySelector("#content > .list > .home  .home1 ")
      var aboutUls = document.querySelectorAll("#content > .list > .about .about3 > .item > ul");

      // var team3Lis = document.querySelectorAll("#content > .list > .team .team3 ul>li");
      var timesLi=document.querySelectorAll("#content > .list > .team .team3  ul>li")
      var time3=document.querySelector("#content > .list > .team  .team3");
      var time3Ul=document.querySelector("#content > .list > .team  .team3  ul ")
      var mouse=document.querySelector(".hear-main  .mouse")
      var  audio=document.querySelector(".hear-main  .mouse audio")

      var mask=document.querySelector(".mask")
      var main1=document.querySelector(".mask .mian1")
      var main2=document.querySelector(".mask .mian2")
      var span=document.querySelector(".mask span")


      var preindex=0
      var now=0

      /*出入场动画*/
      var array=[
          {
           inAn:function () {
               var home1=document.querySelector("#content > .list > .home  .home1 ");
               var home2=document.querySelector("#content > .list > .home  .home2 ");
               home1.style.transform="translateY(0px)"
               home2.style.transform="translateY(0px)"
               home1.style.opacity=1;
               home2.style.opacity=1;

           },
           outAn:function () {
               var home1=document.querySelector("#content > .list > .home  .home1 ");
               var home2=document.querySelector("#content > .list > .home  .home2 ");
               home1.style.transform="translateY(-400px)"
               home2.style.transform="translateY(200px)"
               home1.style.opacity=0;
               home2.style.opacity=0;

           }
          },
          {
              inAn:function () {
                  var plane1=document.querySelector("#content .course  .plane1");
                  var plane2=document.querySelector("#content .course  .plane2 ");
                  var plane3=document.querySelector("#content .course  .plane3 ");
                  plane1.style.transform="translate(0, 0px)"
                  plane2.style.transform="translate(0px, 0px)"
                  plane3.style.transform="translate(0px, 0px)"

              },
              outAn:function () {
                  console.log("xxx")
                  var plane1=document.querySelector("#content .course .plane1");
                  var plane2=document.querySelector("#content .course .plane2");
                  var plane3=document.querySelector("#content .course .plane3");
                  plane1.style.transform = "translate(-200px ,-200px)"
                  plane2.style.transform = "translate(-200px, 200px)"
                  plane3.style.transform = "translate(200px, -200px)"

              }
          },
          {
              inAn:function(){
                  var pencel1 = document.querySelector("#content  .works .pencel1");
                  var pencel2 = document.querySelector("#content  .works .pencel2");
                  var pencel3 = document.querySelector("#content  .works .pencel3");

                  pencel1.style.transform = "translateY(0px)";
                  pencel2.style.transform = "translateY(0px)";
                  pencel3.style.transform = "translateY(0px)";
              },
              outAn:function(){
                  var pencel1 = document.querySelector("#content  .works .pencel1");
                  var pencel2 = document.querySelector("#content  .works .pencel2");
                  var pencel3 = document.querySelector("#content  .works .pencel3");

                  pencel1.style.transform = "translateY(-100px)";
                  pencel2.style.transform = "translateY(100px)";
                  pencel3.style.transform = "translateY(100px)";
              }
          },{
              inAn:function(){
                  var Rect1 = document.querySelector("#content > .list > .about .about3 > .item:nth-child(1)");
                  var Rect2 = document.querySelector("#content > .list > .about .about3 > .item:nth-child(2)");

                  Rect1.style.transform = "rotate(0deg)";
                  Rect2.style.transform = "rotate(0deg)";
              },
              outAn:function(){
                  var Rect1 = document.querySelector("#content > .list > .about .about3 > .item:nth-child(1)");
                  var Rect2 = document.querySelector("#content > .list > .about .about3 > .item:nth-child(2)");

                  Rect1.style.transform = "rotate(45deg)";
                  Rect2.style.transform = "rotate(-45deg)";
              }
          },
          {
              inAn:function(){
                  var Rect1 = document.querySelector("#content > .list > .team .team1");
                  var Rect2 = document.querySelector("#content > .list > .team .team2");

                  Rect1.style.transform = "translateX(0px)";
                  Rect2.style.transform = "translateX(0px)";
              },
              outAn:function(){
                  var Rect1 = document.querySelector("#content > .list > .team .team1");
                  var Rect2 = document.querySelector("#content > .list > .team .team2");

                  Rect1.style.transform = "translateX(-200px)";
                  Rect2.style.transform = "translateX(200px)";
              }
          }


      ]
    for(var i=0;i<array.length;i++){
          array[i].outAn()
    }

      loadd()
    function loadd() {
        var arr = ['bg1.jpg','bg2.jpg','bg3.jpg','bg4.jpg','bg5.jpg','about1.jpg','about2.jpg','about3.jpg','about4.jpg','worksimg1.jpg','worksimg2.jpg','worksimg3.jpg','worksimg4.jpg','team.png','greenLine.png'];
        var falg=0
        for(var i=0;i<arr.length;i++){
            var img=new Image();
            img.src="img/"+arr[i];
            img.onload=function (ev2) {
                falg++
                span.style.width=falg/arr.length*100+"%"

            }
        }
        span.addEventListener("transitionend",function () {
            if(falg === arr.length){
                main1.style.height="0px"
                main2.style.height="0px"
                this.style.display="none"
            }
        })

        main1.addEventListener("transitionend",function () {
            array[0].inAn()
            audio.play();
            mask.remove()
            home3D()
        })
    }


    //音乐
    mouse.onclick=function () {
        if(audio.paused){
            audio.play();
            mouse.style.background="url(img/musicon.gif)"
        }else{
            audio.pause();
            mouse.style.background="url(img/musicoff.gif)"
        }
    }

      //第五屏
      biubiu()
        function    biubiu()  {
          var oc=null
          var canvas=null
          var timer1=0
          var timer2=0
          for(var i=0;i<timesLi.length;i++){
              timesLi[i].onmouseenter=function () {
                  for(var i=0;i<timesLi.length;i++){
                      timesLi[i].style.opacity=.5
                  }
                  this.style.opacity=1
                  addCanvas()
                  oc.style.left = this.offsetLeft+"px";
              }
          }
            time3.onmouseleave=function () {
                for(var i=0;i<timesLi.length;i++){
                    timesLi[i].style.opacity=1;
                }
                oc.remove();
                oc=null;
                clearInterval(timer1)
                clearInterval(timer2)
            }

        function addCanvas() {
            if(!oc){
                oc = document.createElement("canvas");
                oc.width = timesLi[0].offsetWidth;
                oc.height = timesLi[0].offsetHeight*2/3;
                 canvas=oc
                qiPao()
                time3.appendChild(oc);

            }
        }
        function  qiPao() {
            if(canvas.getContext){
                var cxt=canvas.getContext("2d")
            }
            var arr=[]
          timer1=  setInterval(function () {
                cxt.clearRect(0,0,canvas.width,canvas.height)

                for(var i=0;i<arr.length;i++){
                    arr[i].deg+=5
                    arr[i].x=arr[i].stratX+Math.sin(arr[i].deg*Math.PI/180)*arr[i].sep*2
                    arr[i].y=arr[i].stratY - (arr[i].deg*Math.PI/180)*arr[i].sep
                    if(arr[i].y<=50){
                        arr.splice(i,1)
                    }
                }

                for(var i=0;i<arr.length;i++){
                    cxt.save()
                    cxt.fillStyle="rgba("+arr[i].red+","+arr[i].galy+","+arr[i].bule+","+arr[i].alp+")"
                    cxt.beginPath()
                    cxt.arc(arr[i].x,arr[i].y,arr[i].r,0,360)
                    cxt.fill()
                    cxt.restore()

                }
            },10)

            timer2=  setInterval(function () {
                var r=Math.random()*6+2
                var x=Math.random()*canvas.width
                var y=canvas.height-r
                var red= Math.round(Math.random()*255)
                var bule=Math.round(Math.random()*255)
                var galy=Math.round(Math.random()*255)
                var alp=1
                var deg=0
                var stratX=x
                var stratY=y
                var sep=Math.random()*20+10
                arr.push({
                    x:x,
                    y:y,
                    r:r,
                    red:red,
                    bule:bule,
                    galy:galy,
                    alp:alp,
                    deg:deg,
                    stratX:stratX,
                    stratY:stratY,
                    sep:sep
                })
            },50)
        }



   }

      //第四屏
        picBoom()
      function picBoom() {
          for(var i=0;i<aboutUls.length;i++){
              change(aboutUls[i]);
          }

          function  change(UL) {
              var src = UL.dataset.src;
              var w = UL.offsetWidth/2;
              var h = UL.offsetHeight/2;

              for(var i=0;i<4;i++){
                  var  li=document.createElement("li")
                  li.style.width = w+"px";
                  li.style.height = h+"px";
                  var img=document.createElement("img")

                  //后三个图片的位置需要重新排序
                  /*
                  * 1   left 0   top  0
                  * 2   left -w  top  0
                  * 3   left  0  top -h
                  * 4   left -w  top -h
                  * */
                  img.style.left=-(i%2)*w+"px"
                  img.style.top=-Math.floor(i/2)*h+"px"
                    img.src=src

                  li.appendChild(img)
                  UL.appendChild(li);
              }
              UL.onmouseenter=function () {
                  /*
                  * 为什么图片可以隐藏 因为每一个li的大小是ul的四分之一
                  * 图片出li的范围后就被hidden
                  * */
                  // * 1   left 0   top  0
                  // * 2   left -w  top  0
                  // * 3   left  0  top -h
                  // * 4   left -w  top -h
                  // * */

                  // 1. left:0    top:h
                  // 2. left:-2w   top:0
                  // 3. left:w    top:-h
                  // 4. left:-w   top:-2h
                  var img=this.querySelectorAll(" li > img")
                  img[0].style.top=h+"px"
                  img[1].style.left=-2*w+"px"
                  img[2].style.left=w+"px"
                  img[3].style.top=-2*h+"px"
              }
              UL.onmouseleave=function () {
                  var img=this.querySelectorAll(" li > img")
                  img[0].style.top=0+"px"
                  img[1].style.left=-w+"px"
                  img[2].style.left=0+"px"
                  img[3].style.top=-h+"px"
              }
          }
      }

    // 第一屏3D效果
      var oldIndex=0
      var timer3D="xx"
      var autoIndex=0

      function  home3D() {
        for(var i=0;i<home2Li.length;i++){
            home2Li[i].index=i
            home2Li[i].onclick=function () {
                clearInterval(timer3D)
                for(var i=0;i<home2Li.length;i++){
                    home2Li[i].classList.remove("active")
                }
                this.classList.add("active")
                //从左往右 当前的下标 大于前面的下标  左边的隐藏 右边的要显示
                if(this.index>oldIndex ){
                    console.log(this.index)
                    //右边的
                    home1Li[this.index].classList.remove("rightHide")
                    home1Li[this.index].classList.remove("leftHide")
                    home1Li[this.index].classList.remove("leftShow")
                    home1Li[this.index].classList.add("rightShow")
                    //左边的
                    home1Li[oldIndex].classList.remove("rightHide")
                    home1Li[oldIndex].classList.remove("rightShow")
                    home1Li[oldIndex].classList.remove("leftShow")
                    home1Li[oldIndex].classList.add("leftHide")

                }else if(this.index<oldIndex ){     //从右往左 右边隐藏 左边显示
                    //右边的
                    home1Li[oldIndex].classList.remove("rightHide")
                    home1Li[oldIndex].classList.remove("rightShow")
                    home1Li[oldIndex].classList.remove("leftShow")
                    home1Li[oldIndex].classList.add("rightHide")
                    //左边的
                    home1Li[this.index].classList.remove("rightHide")
                    home1Li[this.index].classList.remove("rightShow")
                    home1Li[this.index].classList.remove("leftHide")
                    home1Li[this.index].classList.add("leftShow")
                }
                    //点击的面
                    oldIndex=this.index
                    //告诉自动轮播我点击的面，但是在move函数内会自增，就会形成autoindex比oldindex多一个数
                    autoIndex=this.index
                move()
            }
        }
          move()
        function move() {
            clearInterval(timer3D)
            timer3D=setInterval(function () {
                autoIndex++
                if(autoIndex == home1Li.length ){
                    autoIndex =0;
                }
                for(var i=0;i<home2Li.length;i++){
                    home2Li[i].classList.remove("active")
                }
                home2Li[autoIndex].classList.add("active")


                //右边的
                home1Li[autoIndex].classList.remove("rightHide")
                home1Li[autoIndex].classList.remove("leftHide")
                home1Li[autoIndex].classList.remove("leftShow")
                home1Li[autoIndex].classList.add("rightShow")
                //左边的
                home1Li[oldIndex].classList.remove("rightHide")
                home1Li[oldIndex].classList.remove("rightShow")
                home1Li[oldIndex].classList.remove("leftShow")
                home1Li[oldIndex].classList.add("leftHide")

                    //同步前一个
                /*
                * autoIndex一直加加 ，如果在轮播的途中手动轮播点击的话
                * 这个时候必须要告诉手动轮播播到第几个了
                * */
               oldIndex = autoIndex
            },2000)
        }
          home1.onmouseenter=function(){
              clearInterval(timer3D);
          }

          home1.onmouseleave=function(){
              move();
          }
      }
    //内容区函数
      window.onresize=function (ev2) {
          /*
          * 调整分别率
          *     没有点击的时候视口只能出现一屏contentFun()
          *     点击后，视口只能出现一屏 在1的基础上对每一屏的偏移量进行重新调整
          *     小箭头的位置也需要调整，同步
          * */
          contentFun()
          list.style.top=-now*(document.documentElement.clientHeight - head.offsetHeight)+"px"
          arrow.style.left=liNode[now].offsetLeft+liNode[now].offsetWidth/2-arrow.offsetWidth/2+"px"
      }
      contentFun()
      function contentFun() {
          content.style.height=document.documentElement.clientHeight - head.offsetHeight+"px"
          for (var i=0;i<contLiNode.length;i++){
              contLiNode[i].style.height= document.documentElement.clientHeight - head.offsetHeight+"px"
          }
      }

      //鼠标滚轮事件
      var time
      if(content.addEventListener){
          content.addEventListener("DOMMouseScroll",function (ev) {
               ev=ev||event
              clearTimeout(time)
              time=  setTimeout(function () {
                  fun(ev)
              },200)
          })
      }
      content.onmousewheel=function (ev) {
          ev=ev||event
          //第一次执行时time还不存在 所以可以执行 后面的点击全部清除
          clearTimeout(time)
          time=setTimeout(function () {
              fun(ev)
          },200)
      }
      function fun(ev) {
         ev=ev||event
          var dir=""
          if(ev.wheelDelta){
              dir=ev.wheelDelta>0 ? "up":"down";
          }else if(ev.detail){
              dir=ev.detail<0 ? "up":"down";
          }
          preindex=now
          switch (dir){
              case "up" :
                  if(now>0){
                      now--
                      headerMove(now)
                  }
                  break;
              case "down" :
                  if(now<contLiNode.length-1){
                      now++
                      headerMove(now)
                  }
                  break;
          }


      }
      //头部函数
      var dotNode=document.querySelectorAll("#content  > .dot li")
      headerfun()
      function headerfun() {
          arrow.style.left=firstliNode.offsetLeft+firstliNode.offsetWidth/2-arrow.offsetWidth/2+"px"
          fitsrUpNode.style.width="100%"
          for(var i=0;i<liNode.length;i++){
              liNode[i].index=i
              liNode[i].onclick=function () {
                  preindex=now
                  headerMove(this.index)
                  now=this.index
              }
          }

          for(var i=0;i<dotNode.length;i++){
              dotNode[i].index=i
              dotNode[i].onclick=function () {
                  preindex=now
                  headerMove(this.index)
                  now=this.index
              }
          }

      }
      function headerMove(index) {
          for(var i=0;i<liNode.length;i++){
              upNode[i].style.width=""
          }
          upNode[index].style.width="100%"
          arrow.style.left=liNode[index].offsetLeft+liNode[index].offsetWidth/2-arrow.offsetWidth/2+"px"
          list.style.top=-index*(document.documentElement.clientHeight - head.offsetHeight)+"px"

          for(var i=0;i<dotNode.length;i++){
              dotNode[i].className=""
          }
          dotNode[index].className="active"
          var timeout=null
          if(array[index] &&typeof array[index].inAn === "function"){
              timeout = setTimeout(function () {
                  array[index].inAn()
                  clearTimeout(timeout)
              },300)

          }
          if(array[preindex] &&typeof array[preindex].outAn === "function"){
               array[preindex].outAn()
          }
        }
  }
</script>
</html>
